<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RECIPE APP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../static/css/base.css">
    <link rel="stylesheet" href="../static/css/index.css">
</head>
<body>
<div class="container" role="main" aria-labelledby="app-title">
    <header>
        <div>
            <h1 id="app-title">RECIPE APP</h1>
            <p class="subtitle">A tiny app using flask and sqlite made as a university Assignment</p>
        </div>
        <nav class="links" aria-label="Primary">
            {% if not session.user_id %}
            <a class="btn btn-primary" href="/login">Login</a>
            <a class="btn btn-outline" href="/create_account">Create Account</a>
            {% endif %}
            {% if session.user_id %}
            <a class="btn btn-primary" href="/recipes">Recipes</a>
            <a class="btn btn-primary" href="/create_recipe">Create Recipe</a>
            <a class="btn btn-outline" href="/account">Account</a>
            <a class="btn btn-outline" href="/logout">Sign Out</a>
            {% endif %}
        </nav>
    </header>

    <p class="under-construction" role="status" aria-live="polite">üèóÔ∏è Site Under Construction ‚Äî some features require signing in.</p>

    <div class="divider" aria-hidden="true"></div>

    {% if top_recipes %}
    <section class="top-recipes" aria-labelledby="top-recipes-title">
        <h2 id="top-recipes-title">Top Recipes</h2>
        <div class="recipes-grid">
            {% for r in top_recipes %}
            <article class="recipe-card">
                <h3 class="recipe-title">{{ r[1] }}</h3>
                <div class="recipe-meta">
                    <span class="pill">‚≠ê {{ r[4] if r[4] is not none else '‚Äî' }}</span>
                    {% if r[5] %}
                    <span class="muted">({{ r[5] }} rating{{ 's' if r[5] != 1 else '' }})</span>
                    {% else %}
                    <span class="muted">No ratings yet</span>
                    {% endif %}
                </div>
                <p class="excerpt">
                    {{ (r[2] or '')[:140] ~ ('‚Ä¶' if (r[2] and r[2]|length > 140) else '') }}
                </p>
                <div class="recipe-actions">
                    {% if session.user_id %}
                    <a class="btn" href="/recipes/{{ r[0] }}">View Recipe</a>
                    {% else %}
                    <a class="btn" href="/login">Sign in to view</a>
                    {% endif %}
                </div>
            </article>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <footer>¬© {{ now().year if now is defined else '' }} Fenix Hongell ‚Ä¢ Demo build</footer>
</div>
</body>
</html>