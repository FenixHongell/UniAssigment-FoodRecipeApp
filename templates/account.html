<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Account</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../static/css/base.css">
    <link rel="stylesheet" href="../static/css/account.css">
</head>
<body>
<main class="card" role="main" aria-labelledby="account-title">
    <div class="header">
        <h1 id="account-title">Account</h1>
        <div class="actions">
            <span class="user">Signed in as {{ username }}</span>
            <a class="btn" href="/logout">Sign out</a>
            <a href="/" aria-label="Back to home">Back to home</a>
        </div>
    </div>

    <section class="stats" aria-label="Your statistics">
        <div class="stat">
            <div class="value">{{ recipes_count }}</div>
            <div class="label">Recipes</div>
        </div>
        <div class="stat">
            <div class="value">{{ (avg_rating or 0)|round(2) }}</div>
            <div class="label">Avg rating (your recipes)</div>
        </div>
        <div class="stat">
            <div class="value">{{ comments_count }}</div>
            <div class="label">Comments on your recipes</div>
        </div>
    </section>

    <h2>Your recipes</h2>
    {% if recipes and recipes|length > 0 %}
    <section class="recipes" aria-live="polite">
        {% for r in recipes %}
        <article class="recipe">
            <p class="recipe-name">{{ r[1] }}</p>
            <div class="actions">
                <a class="btn" href="/recipes/{{ r[0] }}/edit">Edit</a>
                <form action="/recipes/delete" method="post">
                    <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
                    <input type="hidden" name="recipe_id" value="{{ r[0] }}">
                    <button type="submit" class="btn danger">Delete</button>
                </form>
            </div>
        </article>
        {% endfor %}
    </section>
    {% else %}
    <p class="subtle">You have not created any recipes yet.</p>
    {% endif %}
</main>
</body>
</html>